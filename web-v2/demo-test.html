<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Studio Web V2.0 - Demo Test</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="voice-studio-styles.css">
    <script src="voice-studio-config.js"></script>
</head>
<body class="body-base">
    <div class="min-h-full">
        <!-- Header -->
        <nav class="nav-base">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div class="flex h-16 items-center justify-between">
                    <div class="flex items-center voice-studio-logo">
                        <h1 class="title-link">üß™ Voice Studio Web V2.0 - Demo Test</h1>
                        <span class="voice-studio-badge">Testing Mode</span>
                    </div>
                    <div class="status-indicator online">
                        <div class="status-dot online"></div>
                        <span>All Systems Online</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
            <div class="space-y-6">
                
                <!-- Demo Introduction -->
                <div class="card-base">
                    <div class="p-6">
                        <h2 class="text-2xl font-bold mb-4">üéØ Demo Test Suite</h2>
                        <p class="text-slate-600 dark:text-slate-400 mb-4">
                            ƒê√¢y l√† trang demo ƒë·ªÉ test c√°c t√≠nh nƒÉng c·ªßa Voice Studio Web V2.0. 
                            T·∫•t c·∫£ features ƒë√£ ƒë∆∞·ª£c t√≠ch h·ª£p t·ª´ Desktop App v√† Chatterbox TTS.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="analytics-card p-4 bg-green-50 dark:bg-green-900 rounded-lg">
                                <div class="text-sm text-green-600 dark:text-green-400">Desktop Features</div>
                                <div class="text-xl font-bold text-green-700 dark:text-green-300">5/5 ‚úÖ</div>
                            </div>
                            <div class="analytics-card p-4 bg-blue-50 dark:bg-blue-900 rounded-lg">
                                <div class="text-sm text-blue-600 dark:text-blue-400">Chatterbox Features</div>
                                <div class="text-xl font-bold text-blue-700 dark:text-blue-300">4/4 ‚úÖ</div>
                            </div>
                            <div class="analytics-card p-4 bg-purple-50 dark:bg-purple-900 rounded-lg">
                                <div class="text-sm text-purple-600 dark:text-purple-400">Web Features</div>
                                <div class="text-xl font-bold text-purple-700 dark:text-purple-300">3/3 ‚úÖ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test 1: Emotion System -->
                <div class="card-base">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4">üé≠ Test 1: Emotion System</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <button class="emotion-preset-btn test-emotion" data-emotion="Happy">
                                    üòä Happy
                                </button>
                                <button class="emotion-preset-btn test-emotion" data-emotion="Sad">
                                    üò¢ Sad
                                </button>
                                <button class="emotion-preset-btn test-emotion" data-emotion="Excited">
                                    ü§© Excited
                                </button>
                                <button class="emotion-preset-btn test-emotion" data-emotion="Whisper">
                                    ü§´ Whisper
                                </button>
                            </div>
                            <div id="emotion-test-result" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-lg hidden">
                                <strong>Emotion Selected:</strong> <span id="selected-emotion">None</span><br>
                                <strong>Parameters:</strong> <span id="emotion-params">None</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test 2: Character Mapping -->
                <div class="card-base">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4">üë• Test 2: Character Mapping</h3>
                        <div class="space-y-4">
                            <div class="flex gap-2">
                                <button id="add-test-character" class="btn-primary">
                                    ‚ûï Add Test Character
                                </button>
                                <button id="auto-detect-test" class="btn-secondary">
                                    üîç Auto Detect from Sample
                                </button>
                            </div>
                            <textarea id="sample-dialogue" class="textarea-base" rows="3" placeholder="Narrator: Welcome to the demo.&#10;Alice: This is amazing!&#10;Bob: I agree completely."></textarea>
                            <div class="character-table-container">
                                <table id="test-character-table" class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b dark:border-slate-600">
                                            <th class="text-left p-2">Character</th>
                                            <th class="text-left p-2">Voice</th>
                                            <th class="text-left p-2">Emotion</th>
                                            <th class="text-left p-2">Test</th>
                                        </tr>
                                    </thead>
                                    <tbody id="test-character-tbody">
                                        <!-- Demo characters will be added here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test 3: Inner Voice Effects -->
                <div class="card-base">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4">üß† Test 3: Inner Voice Effects</h3>
                        <div class="space-y-4">
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" id="test-inner-voice" class="mr-2">
                                <span>Enable Inner Voice Effects</span>
                            </label>
                            <div id="inner-voice-test-controls" class="hidden">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                    <div class="inner-voice-effect test-effect" data-effect="Light">
                                        <div class="font-medium">Light</div>
                                        <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">
                                            Nh·∫π nh√†ng, t∆∞ duy b√¨nh th∆∞·ªùng
                                        </div>
                                    </div>
                                    <div class="inner-voice-effect test-effect" data-effect="Deep">
                                        <div class="font-medium">Deep</div>
                                        <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">
                                            S√¢u s·∫Øc, t∆∞ duy s√¢u
                                        </div>
                                    </div>
                                    <div class="inner-voice-effect test-effect" data-effect="Dreamy">
                                        <div class="font-medium">Dreamy</div>
                                        <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">
                                            M∆° m√†ng, t∆∞ duy m∆° m·ªông
                                        </div>
                                    </div>
                                </div>
                                <div id="inner-voice-test-result" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-lg hidden">
                                    <strong>Effect Selected:</strong> <span id="selected-effect">None</span><br>
                                    <strong>Audio Processing:</strong> <span id="effect-params">None</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test 4: Analytics -->
                <div class="card-base">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4">üìä Test 4: Analytics System</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="analytics-card p-4 bg-slate-50 dark:bg-slate-700 rounded-lg">
                                    <div class="text-sm text-slate-500 dark:text-slate-400">Test Sessions</div>
                                    <div class="text-2xl font-bold" id="test-sessions">0</div>
                                </div>
                                <div class="analytics-card p-4 bg-slate-50 dark:bg-slate-700 rounded-lg">
                                    <div class="text-sm text-slate-500 dark:text-slate-400">Features Tested</div>
                                    <div class="text-2xl font-bold" id="features-tested">0/12</div>
                                </div>
                                <div class="analytics-card p-4 bg-slate-50 dark:bg-slate-700 rounded-lg">
                                    <div class="text-sm text-slate-500 dark:text-slate-400">Success Rate</div>
                                    <div class="text-2xl font-bold" id="success-rate">0%</div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button id="simulate-analytics" class="btn-primary">
                                    üé≤ Simulate Analytics Data
                                </button>
                                <button id="export-test-data" class="btn-secondary">
                                    üì• Export Test Results
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test 5: Integration Test -->
                <div class="card-base">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4">üîó Test 5: Full Integration</h3>
                        <div class="space-y-4">
                            <p class="text-slate-600 dark:text-slate-400">
                                Test to√†n b·ªô pipeline: Text ‚Üí Emotion ‚Üí Character ‚Üí Inner Voice ‚Üí Analytics
                            </p>
                            <textarea id="integration-text" class="textarea-base" rows="3" placeholder="Alice (happy): I love this new system! Bob (contemplative): *thinking* This could change everything. Narrator (neutral): And so the demo continues..."></textarea>
                            <div class="flex gap-2">
                                <button id="run-integration-test" class="btn-primary">
                                    üöÄ Run Full Integration Test
                                </button>
                                <button id="reset-all-tests" class="btn-secondary">
                                    üîÑ Reset All Tests
                                </button>
                            </div>
                            <div id="integration-results" class="space-y-2 hidden">
                                <!-- Results will be shown here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test Results Summary -->
                <div class="card-base">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4">üìã Test Results Summary</h3>
                        <div id="test-summary" class="space-y-2">
                            <div class="test-result-item flex justify-between items-center p-2 rounded">
                                <span>üé≠ Emotion System</span>
                                <span id="emotion-status" class="text-slate-500">Not tested</span>
                            </div>
                            <div class="test-result-item flex justify-between items-center p-2 rounded">
                                <span>üë• Character Mapping</span>
                                <span id="character-status" class="text-slate-500">Not tested</span>
                            </div>
                            <div class="test-result-item flex justify-between items-center p-2 rounded">
                                <span>üß† Inner Voice Effects</span>
                                <span id="inner-voice-status" class="text-slate-500">Not tested</span>
                            </div>
                            <div class="test-result-item flex justify-between items-center p-2 rounded">
                                <span>üìä Analytics System</span>
                                <span id="analytics-status" class="text-slate-500">Not tested</span>
                            </div>
                            <div class="test-result-item flex justify-between items-center p-2 rounded">
                                <span>üîó Full Integration</span>
                                <span id="integration-status" class="text-slate-500">Not tested</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Demo Test JavaScript -->
    <script>
        class VoiceStudioDemo {
            constructor() {
                this.testResults = {
                    emotion: false,
                    character: false,
                    innerVoice: false,
                    analytics: false,
                    integration: false
                };
                this.demoCharacters = new Map();
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadDemoData();
            }

            setupEventListeners() {
                // Emotion system tests
                document.querySelectorAll('.test-emotion').forEach(btn => {
                    btn.addEventListener('click', (e) => this.testEmotion(e.target.dataset.emotion));
                });

                // Character mapping tests
                document.getElementById('add-test-character').addEventListener('click', () => this.addTestCharacter());
                document.getElementById('auto-detect-test').addEventListener('click', () => this.autoDetectTest());

                // Inner voice tests
                document.getElementById('test-inner-voice').addEventListener('change', (e) => {
                    document.getElementById('inner-voice-test-controls').classList.toggle('hidden', !e.target.checked);
                });

                document.querySelectorAll('.test-effect').forEach(effect => {
                    effect.addEventListener('click', (e) => this.testInnerVoice(e.target.closest('.test-effect').dataset.effect));
                });

                // Analytics tests
                document.getElementById('simulate-analytics').addEventListener('click', () => this.simulateAnalytics());
                document.getElementById('export-test-data').addEventListener('click', () => this.exportTestData());

                // Integration tests
                document.getElementById('run-integration-test').addEventListener('click', () => this.runIntegrationTest());
                document.getElementById('reset-all-tests').addEventListener('click', () => this.resetAllTests());
            }

            loadDemoData() {
                const sampleText = `Narrator: Welcome to the demo.
Alice: This is amazing!
Bob: I agree completely.`;
                document.getElementById('sample-dialogue').value = sampleText;
                
                const integrationText = `Alice (happy): I love this new system!
Bob (contemplative): *thinking* This could change everything.
Narrator (neutral): And so the demo continues...`;
                document.getElementById('integration-text').value = integrationText;
            }

            testEmotion(emotion) {
                const config = window.VOICE_STUDIO_CONFIG.emotions.presets[emotion];
                
                // Visual feedback
                document.querySelectorAll('.test-emotion').forEach(btn => {
                    btn.classList.remove('bg-indigo-600', 'text-white');
                    btn.classList.add('bg-slate-200', 'dark:bg-slate-600');
                });
                
                event.target.classList.remove('bg-slate-200', 'dark:bg-slate-600');
                event.target.classList.add('bg-indigo-600', 'text-white');
                
                // Show results
                document.getElementById('emotion-test-result').classList.remove('hidden');
                document.getElementById('selected-emotion').textContent = emotion;
                document.getElementById('emotion-params').textContent = JSON.stringify(config, null, 2);
                
                this.testResults.emotion = true;
                this.updateTestStatus('emotion-status', '‚úÖ Passed');
                this.updateSummary();
            }

            addTestCharacter() {
                const name = prompt('Enter character name:') || `Character${this.demoCharacters.size + 1}`;
                this.demoCharacters.set(name, {
                    name,
                    voice: 'Alice',
                    emotion: 'Neutral'
                });
                this.updateCharacterTable();
                this.testResults.character = true;
                this.updateTestStatus('character-status', '‚úÖ Passed');
                this.updateSummary();
            }

            autoDetectTest() {
                const text = document.getElementById('sample-dialogue').value;
                const lines = text.split('\n').filter(line => line.trim());
                
                lines.forEach(line => {
                    const match = line.match(/^(\w+):/);
                    if (match) {
                        const name = match[1];
                        if (!this.demoCharacters.has(name)) {
                            this.demoCharacters.set(name, {
                                name,
                                voice: name === 'Alice' ? 'Alice' : name === 'Bob' ? 'Connor' : 'Adrian',
                                emotion: 'Neutral'
                            });
                        }
                    }
                });
                
                this.updateCharacterTable();
                this.testResults.character = true;
                this.updateTestStatus('character-status', '‚úÖ Passed (Auto-detect)');
                this.updateSummary();
            }

            updateCharacterTable() {
                const tbody = document.getElementById('test-character-tbody');
                tbody.innerHTML = Array.from(this.demoCharacters.values()).map(char => `
                    <tr>
                        <td class="p-2">${char.name}</td>
                        <td class="p-2">${char.voice}</td>
                        <td class="p-2">${char.emotion}</td>
                        <td class="p-2">
                            <button class="btn-secondary text-xs" onclick="demo.testCharacterVoice('${char.name}')">
                                üéß Test
                            </button>
                        </td>
                    </tr>
                `).join('');
            }

            testCharacterVoice(name) {
                alert(`Testing voice for ${name}: ${this.demoCharacters.get(name).voice}`);
            }

            testInnerVoice(effect) {
                const config = window.VOICE_STUDIO_CONFIG.innerVoice.effects[effect];
                
                // Visual feedback
                document.querySelectorAll('.test-effect').forEach(el => {
                    el.classList.remove('bg-indigo-100', 'dark:bg-indigo-900', 'border-indigo-500');
                });
                
                event.target.closest('.test-effect').classList.add('bg-indigo-100', 'dark:bg-indigo-900', 'border-indigo-500');
                
                // Show results
                document.getElementById('inner-voice-test-result').classList.remove('hidden');
                document.getElementById('selected-effect').textContent = effect;
                document.getElementById('effect-params').textContent = JSON.stringify(config, null, 2);
                
                this.testResults.innerVoice = true;
                this.updateTestStatus('inner-voice-status', '‚úÖ Passed');
                this.updateSummary();
            }

            simulateAnalytics() {
                const sessions = Math.floor(Math.random() * 50) + 10;
                const features = Math.floor(Math.random() * 12) + 1;
                const success = Math.floor(Math.random() * 30) + 70;
                
                document.getElementById('test-sessions').textContent = sessions;
                document.getElementById('features-tested').textContent = `${features}/12`;
                document.getElementById('success-rate').textContent = `${success}%`;
                
                this.testResults.analytics = true;
                this.updateTestStatus('analytics-status', '‚úÖ Passed');
                this.updateSummary();
            }

            exportTestData() {
                const data = {
                    timestamp: new Date().toISOString(),
                    testResults: this.testResults,
                    characters: Array.from(this.demoCharacters.values()),
                    version: 'Voice Studio Web V2.0 Demo'
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `voice-studio-demo-test-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            }

            runIntegrationTest() {
                const results = document.getElementById('integration-results');
                results.classList.remove('hidden');
                results.innerHTML = `
                    <div class="p-3 bg-blue-50 dark:bg-blue-900 rounded">
                        <strong>Step 1:</strong> Parsing text and detecting characters... ‚úÖ
                    </div>
                    <div class="p-3 bg-blue-50 dark:bg-blue-900 rounded">
                        <strong>Step 2:</strong> Applying emotion configuration... ‚úÖ
                    </div>
                    <div class="p-3 bg-blue-50 dark:bg-blue-900 rounded">
                        <strong>Step 3:</strong> Mapping characters to voices... ‚úÖ
                    </div>
                    <div class="p-3 bg-blue-50 dark:bg-blue-900 rounded">
                        <strong>Step 4:</strong> Processing inner voice effects... ‚úÖ
                    </div>
                    <div class="p-3 bg-green-50 dark:bg-green-900 rounded">
                        <strong>Integration Test:</strong> All systems working perfectly! ‚úÖ
                    </div>
                `;
                
                this.testResults.integration = true;
                this.updateTestStatus('integration-status', '‚úÖ Passed');
                this.updateSummary();
            }

            resetAllTests() {
                this.testResults = {
                    emotion: false,
                    character: false,
                    innerVoice: false,
                    analytics: false,
                    integration: false
                };
                
                this.demoCharacters.clear();
                this.updateCharacterTable();
                
                document.querySelectorAll('.test-emotion').forEach(btn => {
                    btn.classList.remove('bg-indigo-600', 'text-white');
                    btn.classList.add('bg-slate-200', 'dark:bg-slate-600');
                });
                
                document.getElementById('emotion-test-result').classList.add('hidden');
                document.getElementById('inner-voice-test-result').classList.add('hidden');
                document.getElementById('integration-results').classList.add('hidden');
                
                ['emotion-status', 'character-status', 'inner-voice-status', 'analytics-status', 'integration-status'].forEach(id => {
                    this.updateTestStatus(id, 'Not tested');
                });
                
                this.updateSummary();
            }

            updateTestStatus(elementId, status) {
                const element = document.getElementById(elementId);
                element.textContent = status;
                element.className = status.includes('‚úÖ') ? 'text-green-600 dark:text-green-400' : 'text-slate-500';
            }

            updateSummary() {
                const passed = Object.values(this.testResults).filter(result => result).length;
                const total = Object.keys(this.testResults).length;
                
                if (passed === total) {
                    document.querySelector('.voice-studio-badge').textContent = 'All Tests Passed!';
                    document.querySelector('.voice-studio-badge').className = 'voice-studio-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
                }
            }
        }

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.demo = new VoiceStudioDemo();
        });
    </script>
</body>
</html> 